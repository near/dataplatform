// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Indexer unit tests Indexer.buildImperativeContextForFunction() can fetch from the near social api 1`] = `
[
  [
    "https://api.near.social/index",
    {
      "body": "{"action":"post","key":"main","options":{"limit":1,"order":"desc"}}",
      "headers": {
        "Content-Type": "application/json",
      },
      "method": "POST",
    },
  ],
]
`;

exports[`Indexer unit tests Indexer.runFunctions() should execute all functions against the current block 1`] = `
[
  [
    "mock-hasura-endpoint/v1/graphql",
    {
      "body": "{"query":"\\n        mutation writeLog($function_name: String!, $block_height: numeric!, $message: String!){\\n            insert_indexer_log_entries_one(object: {function_name: $function_name, block_height: $block_height, message: $message}) {id}\\n         }","variables":{"function_name":"buildnear.testnet/test","block_height":456,"message":"Running function buildnear.testnet/test, lag is: NaNms from block timestamp"}}",
      "headers": {
        "Content-Type": "application/json",
        "X-Hasura-Admin-Secret": "mock-hasura-secret",
        "X-Hasura-Role": "append",
        "X-Hasura-Use-Backend-Only-Permissions": "true",
      },
      "method": "POST",
    },
  ],
  [
    "mock-hasura-endpoint/v1/graphql",
    {
      "body": "{"query":"\\n            mutation SetStatus($function_name: String, $status: String) {\\n              insert_indexer_state_one(object: {function_name: $function_name, status: $status, current_block_height: 0 }, on_conflict: { constraint: indexer_state_pkey, update_columns: status }) {\\n                function_name\\n                status\\n              }\\n            }\\n        ","variables":{"function_name":"buildnear.testnet/test","status":"RUNNING"}}",
      "headers": {
        "Content-Type": "application/json",
        "X-Hasura-Admin-Secret": "mock-hasura-secret",
        "X-Hasura-Role": "append",
        "X-Hasura-Use-Backend-Only-Permissions": "true",
      },
      "method": "POST",
    },
  ],
  [
    "mock-hasura-endpoint/v1/graphql",
    {
      "body": "{"query":"\\n        mutation WriteBlock($function_name: String!, $block_height: numeric!) {\\n              insert_indexer_state(\\n                objects: {current_block_height: $block_height, function_name: $function_name}\\n                on_conflict: {constraint: indexer_state_pkey, update_columns: current_block_height}\\n              ) {\\n                returning {\\n                  current_block_height\\n                  function_name\\n                }\\n              }\\n            }","variables":{"function_name":"buildnear.testnet/test","block_height":456}}",
      "headers": {
        "Content-Type": "application/json",
        "X-Hasura-Admin-Secret": "mock-hasura-secret",
        "X-Hasura-Role": "append",
        "X-Hasura-Use-Backend-Only-Permissions": "true",
      },
      "method": "POST",
    },
  ],
]
`;
